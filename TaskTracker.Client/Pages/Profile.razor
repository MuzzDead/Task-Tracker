@page "/profile"
@using AntDesign

<div class="profile-wrapper">
    @if (IsLoading)
    {
        <div class="loading-container">
            <Spin Size=SpinSize.Large />
            <TypographyText Style="margin-top: 1rem;">Loading profile...</TypographyText>
        </div>
    }
    else if (User != null)
    {
        <Card Hoverable="true" Style="width: 100%; max-width: 500px;">
            <div class="profile-header">
                <TypographyTitle Level="3">👤 User Profile</TypographyTitle>
            </div>
            <div class="avatar-section">
                <Avatar Size=@AvatarSize.Large Src="https://api.dicebear.com/7.x/identicon/svg?seed=smbd" />
                <Button Type=@ButtonType.Link
                        Icon="upload"
                        Size=@ButtonSize.Default
                        OnClick=@OnChangeAvatar>
                    Change Avatar
                </Button>
            </div>
            <div class="user-info">
                <TypographyText class="info-item"><strong>Username:</strong> @($"@{User.Username}")</TypographyText>
                <TypographyText class="info-item"><strong>Email:</strong> @User.Email</TypographyText>
            </div>
            <div class="edit-buttons">
                <Button Block="true"
                        Type=@ButtonType.Primary
                        Icon="form"
                        Size=@ButtonSize.Large
                        OnClick=@OnEditInfo>
                    Edit Info
                </Button>
            </div>
            <Divider />
            <div class="password-section">
                <Button Block="true"
                        Type=@ButtonType.Dashed
                        Icon="key"
                        Size=@ButtonSize.Large
                        OnClick=@OnChangePassword>
                    Change Password
                </Button>
            </div>
        </Card>
    }
    else
    {
        <Card Style="width: 100%; max-width: 400px; text-align: center;">
            <div class="error-container">
                <Icon Type="exclamation-circle" Style="font-size: 48px; color: #ff4d4f; margin-bottom: 1rem;" />
                <TypographyTitle Level="4">Access Denied</TypographyTitle>
                <TypographyText>Please log in to view your profile.</TypographyText>
                <Button Type=@ButtonType.Primary
                        Style="margin-top: 1rem;"
                        OnClick=@GoToLogin>
                    Go to Login
                </Button>
            </div>
        </Card>
    }
</div>